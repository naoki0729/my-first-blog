# my-first-blog

**本プロジェクトで解決したい課題**

現在、ホールスタッフの人数を各店舗の店長が経験から決定しているため、時間帯によって人数の過不足が発生している可能性がある。
そこで、ホールスタッフの配置を最適化することを目的とした機械学習モデルを構築、運用していく。
今回は1日の1時間あたりの客数を予測して、ホールスタッフの人数最適化を行っていく。
これにより、人的コストの削減だけでなく、客数に対する最適な接客人数の推定も可能となるため、ホールスタッフの働きやすさにも繋がる。


**課題が解決できている状態の定義**

まず、以下の項目を設定する。（表内の数字は大規模店で考える例である）
| 日時             | 店内にいるスタッフの人数 | 入店者数 | 接客に必要な人数 | 稼働率（接客に必要な人数÷店内にいるスタッフの人数） | カバー率（店内にいるスタッフの人数÷接客に必要な人数) | 
| ---------------- | ------------------------ | -------- | ---------------- | --------------------------------------------------- | ---------------------------------------------------- | 
| 2022/11/25 10:00 | 2                        | 5        | 1                | 50%                                                 | 100%                                                 | 
| 2022/11/25 11:00 | 2                        | 10       | 2                | 100%                                                | 100%                                                 | 
| 2022/11/25 12:00 | 3                        | 30       | 6                | 100%                                                | 50%                                                  | 

上記の表にある、稼働率とカバー率の両方を高め、その結果起こる人的コストの削減による店舗の利益が増加すれば今回の課題が解決できている状態だと定義する。
各店舗は関東地方および東北地方の地域別に存在することに加えて、大規模店と中規模店の種類に分けられるため、それぞれの条件内で本プロジェクトを適用する店舗と適用しない店舗を設定し、結果から各条件内で比較を行い効果検証を行っていく。

**システム構成**
![image](https://user-images.githubusercontent.com/113179618/204151652-00973f9f-95b9-4b04-90c4-bc0ed3a03ce7.png)

①：店舗内で毎日客数データを集計してもらい、データベースへ収集・格納する。
②：集まったデータに対して前処理を行い、必要な特徴量エンジニアリング等を行う。
③・④：予測モデルを作成して、客数予測値を算出する。
⑤：予測結果を随時データベースへ格納していく。
⑥：客数実測値が揃ったタイミングで、月末に月毎の客数予測値との比較検証を行う。
⑦：結果的に精度改善をする必要があれば改善を行えるように監視する。

メンバー構成は、プロジェクトマネージャー、プロジェクトリーダー、データサイエンティスト複数名で行う。
プロジェクトマネージャーは、プロジェクト費用やスケジュールを管理、また課題に対する運用の見通しを立てる。
プロジェクトリーダーは、各データサイエンティストに仕事を割り振り、チームの意見をまとめて店長に説明や提案をする。
データサイエンティストは、客数データを集計してもらった後、上記の図にある処理を行う。
また、導入前後の稼働率とカバー率、各店舗の利益の推移結果も管理する。


**機械学習のプログラム、モデル、推論結果の管理方法**

機械学習のプログラムは、チーム内で定期スケジュール設定をして、随時レビューを行う。
共有時はjupyter notebookではなく、pythonスクリプトを使用し、gitを用いて管理する。
過去に作成したモデルは、pklファイルで保存し、特徴量やモデル手法といった設定はyamlファイルで保存する。
ここで管理方法を共通化しておくことで、過去のモデルを再利用したり、比較評価することが可能になる。
推論結果に関しては、必ず可視化を行った上で、プロジェクトメンバー向けと店舗の店長向けの報告資料を作り分けておく。
客数予測における精度誤差が30%以上のモデルは破棄していき、推論結果と共に3年間は保存しておく。


**機械学習の学習と推論を実行するタイミング**



学習および推論時に利用可能なデータの管理方法。2点
ワークフローの中で適切に学習と推論を実行する。2点
機械学習モデルを評価し、修正し、本番で利用する手順を言及している。1点


店舗への連絡方法

推論結果を店舗へ適切なタイミングで連絡する方法。2点
障害等、異常事態の発生時に店舗へ連絡し、適切な処理を取る方法。2点
施策を改善するための店舗ヒアリングやインタビュー。1点


ホールスタッフの人員配置が適切に実施されていることを確認する方法

人員配置が実施されていることを店舗から情報収集する方法。2点
適切に実施されいていない場合にその原因を調査し、改善する方法。2点
施策を評価するためにデータを自動で収集する方法。1点


本プロジェクトの成否を判断するための数値的な評価基準

コスト削減効果（人的コスト、システムコスト、運用コスト、教育コスト、その他）。2点
店舗ホールスタッフおよび店長の満足度評価。3点


本プロジェクトの品質を維持し、改善する方法

施策を維持する方法。1点
評価を改善施策（またはプロジェクトを終了する指標）にする方法。2点
運用を自動化する方法。2点




